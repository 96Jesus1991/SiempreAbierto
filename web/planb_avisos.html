<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TablÃ³n de Avisos - En Ruta</title>
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#D4AF37">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/planb.css">
</head>
<body>
    <div class="planb-container">
        <!-- Header -->
        <header class="planb-header">
            <a href="index.html" class="back-btn">â† Inicio</a>
            <h1 class="header-title">ğŸš— TablÃ³n en Ruta</h1>
        </header>

        <!-- Aviso de seguridad -->
        <div class="aviso-seguridad">
            <p>âš ï¸ <strong>Seguridad:</strong> Queda siempre en lugares pÃºblicos. No subas a vehÃ­culos de desconocidos. En emergencias llama al <strong>112</strong>.</p>
        </div>

        <!-- BotÃ³n crear aviso -->
        <button class="btn-crear-aviso" onclick="mostrarFormulario()">
            â• Publicar Aviso
        </button>

        <!-- Formulario nuevo aviso -->
        <div id="form-aviso" class="form-aviso" style="display:none;">
            <h3>ğŸ“ Nuevo Aviso</h3>
            
            <div class="form-group">
                <label>Tipo de aviso</label>
                <select id="aviso-tipo">
                    <option value="tirado">ğŸš— Tirado/AverÃ­a</option>
                    <option value="corte">ğŸš§ Corte de carretera</option>
                    <option value="trafico">ğŸš¦ TrÃ¡fico/RetenciÃ³n</option>
                    <option value="peligro">âš ï¸ Peligro</option>
                    <option value="otro">ğŸ“ Otro</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>UbicaciÃ³n aproximada *</label>
                <input type="text" id="aviso-zona" placeholder="Ej: A-7 salida Sagunto, cerca gasolinera Repsol" maxlength="200">
                <small>âš ï¸ Usa puntos pÃºblicos (gasolinera, Ã¡rea de servicio, km). NO publiques direcciones exactas.</small>
            </div>
            
            <div class="form-group">
                <label>Â¿QuÃ© necesitas?</label>
                <input type="text" id="aviso-necesidad" placeholder="Ej: Rueda de repuesto, gasoil, remolque..." maxlength="200">
            </div>
            
            <div class="form-group">
                <label>DescripciÃ³n adicional</label>
                <textarea id="aviso-descripcion" placeholder="MÃ¡s detalles..." maxlength="500"></textarea>
            </div>
            
            <div class="form-buttons">
                <button class="btn-cancelar" onclick="ocultarFormulario()">Cancelar</button>
                <button class="btn-publicar" onclick="publicarAviso()">ğŸ“¤ Publicar</button>
            </div>
            
            <p class="form-nota">â„¹ï¸ Los avisos caducan en 24 horas automÃ¡ticamente.</p>
        </div>

        <!-- Lista de avisos -->
        <div id="lista-avisos" class="lista-avisos">
            <div class="loading-spinner" id="loading-avisos"></div>
        </div>

        <!-- Sin avisos -->
        <div id="sin-avisos" class="sin-avisos" style="display:none;">
            <span class="emoji">ğŸ›£ï¸</span>
            <p>No hay avisos activos</p>
            <small>Â¡Buenas noticias! La carretera estÃ¡ tranquila.</small>
        </div>

        <!-- Modal de Ã©xito -->
        <div id="modal-exito" class="modal" style="display:none;">
            <div class="modal-content">
                <div class="modal-icon">âœ…</div>
                <h3>Aviso Publicado</h3>
                <p>Tu aviso estarÃ¡ visible durante 24 horas.</p>
                <div class="modal-info">
                    <p><strong>Guarda este enlace</strong> para editar o eliminar tu aviso:</p>
                    <input type="text" id="edit-url" readonly onclick="this.select()">
                    <button class="btn-copiar-small" onclick="copiarEditUrl()">ğŸ“‹ Copiar</button>
                </div>
                <button class="btn-cerrar-modal" onclick="cerrarModal()">Entendido</button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="planb-footer">
            <p>ğŸ”„ Los avisos se actualizan cada minuto</p>
            <p>Caduca automÃ¡ticamente en 24h</p>
        </footer>
    </div>

    <script src="js/planb_avisos.js"></script>
</body>
</html>
